# Flow Documentation Generator

ä¸€å€‹åŸºæ–¼ AI çš„ç¨‹å¼ç¢¼åˆ†æå·¥å…·ï¼Œèƒ½è‡ªå‹•ç”Ÿæˆ C# å°ˆæ¡ˆçš„å®Œæ•´æµç¨‹æ–‡ä»¶ã€å‘¼å«éˆåˆ†æå’Œ Mermaid æµç¨‹åœ–ã€‚

## åŠŸèƒ½ç‰¹è‰²

- ğŸ” **è‡ªå‹•ç¨‹å¼ç¢¼åˆ†æ**ï¼šä½¿ç”¨ Tree-sitter è§£æ C# ç¨‹å¼ç¢¼çµæ§‹  
- ğŸ¤– **AI æ™ºèƒ½åˆ†æ**ï¼šåŸºæ–¼ Gemini API é€²è¡ŒåŠŸèƒ½åˆ†æå’Œæ–‡ä»¶ç”Ÿæˆ
- ğŸ“Š **å‘¼å«éˆè¿½è¹¤**ï¼šå®Œæ•´è¿½è¹¤æ–¹æ³•å‘¼å«é—œä¿‚å’Œç›¸ä¾æ€§  
- ğŸ“ˆ **æµç¨‹åœ–ç”Ÿæˆ**ï¼šè‡ªå‹•ç”Ÿæˆ Mermaid æ ¼å¼çš„æµç¨‹åœ–
- ğŸ“š **æŠ€è¡“æ–‡ä»¶**ï¼šç”Ÿæˆä¼æ¥­ç´šçš„æŠ€è¡“åƒè€ƒæ‰‹å†Š
- âš¡ **å¿«å–æ©Ÿåˆ¶**ï¼šæ”¯æ´å¢é‡åˆ†æï¼Œæå‡åŸ·è¡Œæ•ˆç‡
- ğŸ¯ **éˆæ´»é…ç½®**ï¼šæ”¯æ´è‡ªè¨‚å…¥å£é»å’Œæª”æ¡ˆéæ¿¾è¦å‰‡

## ç³»çµ±éœ€æ±‚

- Python 3.13.5+
- uvï¼ˆPython å¥—ä»¶ç®¡ç†å·¥å…·ï¼‰
- Gemini API é‡‘é‘°

## å®‰è£æ­¥é©Ÿ

### 1. å®‰è£ uv
refer: [uv](https://github.com/astral-sh/uv)

### 2. è¨­å®šå°ˆæ¡ˆ
```bash
# è¤‡è£½å°ˆæ¡ˆ
git clone <repository-url>
cd flow_doc_gener

# å®‰è£ç›¸ä¾å¥—ä»¶
uv sync
```

### 3. ç’°å¢ƒè®Šæ•¸è¨­å®š
å»ºç«‹ `.env` æª”æ¡ˆï¼š
```env
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_MODEL=gemini-2.5-flash
```

## ä½¿ç”¨æ–¹å¼

### åŸºæœ¬ä½¿ç”¨
```bash
# åˆ†ææŒ‡å®šè³‡æ–™å¤¾çš„ C# å°ˆæ¡ˆ
uv run main.py --dir /path/to/your/csharp/project
```

### é€²éšåƒæ•¸

#### æª”æ¡ˆéæ¿¾
```bash
# è‡ªè¨‚åŒ…å«çš„æª”æ¡ˆé¡å‹
uv run main.py --dir /path/to/project -i "*.cs" "*.cshtml"

# æ’é™¤ç‰¹å®šæª”æ¡ˆæˆ–è³‡æ–™å¤¾  
uv run main.py --dir /path/to/project -e "test*" "bin/*" "obj/*"
```

#### æŒ‡å®šå…¥å£é»
```bash
# åˆ†æç‰¹å®šçš„æ§åˆ¶å™¨æ–¹æ³•
uv run main.py --dir /path/to/project --target-func "UserController.GetUser"

# åˆ†æå¤šå€‹å…¥å£é»
uv run main.py --dir /path/to/project --target-func "UserController.GetUser" "OrderController.Create"
```

#### èªè¨€è¨­å®š
```bash
# ç”Ÿæˆä¸­æ–‡æ–‡ä»¶
uv run main.py --dir /path/to/project --lang "ä¸­æ–‡"

# ç”Ÿæˆè‹±æ–‡æ–‡ä»¶  
uv run main.py --dir /path/to/project --lang "english"
```

#### å¿«å–ç®¡ç†
```bash
# é‡è¤‡ä½¿ç”¨ç¾æœ‰åˆ†æçµæœ
uv run main.py --dir /path/to/project --run-id "20250829T143052Z"
```

## è¼¸å‡ºçµæœ

åŸ·è¡Œå®Œæˆå¾Œï¼Œæœƒåœ¨ä»¥ä¸‹ä½ç½®ç”¢ç”Ÿæª”æ¡ˆï¼š

```
output/
â””â”€â”€ {run_id}/
    â”œâ”€â”€ UserController.GetUser.md      # æŠ€è¡“æ–‡ä»¶
    â”œâ”€â”€ OrderController.Create.md      # æŠ€è¡“æ–‡ä»¶  
    â””â”€â”€ ...

cache/
â””â”€â”€ {run_id}/
    â”œâ”€â”€ src.json                       # åŸå§‹ç¢¼å¿«å–
    â”œâ”€â”€ func_map.json                  # å‡½æ•¸å°æ‡‰è¡¨
    â”œâ”€â”€ dep.json                       # ç›¸ä¾é—œä¿‚
    â”œâ”€â”€ entry.json                     # å…¥å£é»è³‡è¨Š
    â”œâ”€â”€ call_chain.json                # å‘¼å«éˆåˆ†æ
    â”œâ”€â”€ feat.json                      # åŠŸèƒ½åˆ†æ
    â”œâ”€â”€ chart.json                     # æµç¨‹åœ–è³‡æ–™
    â””â”€â”€ feat_status.json               # è™•ç†ç‹€æ…‹
```

## æ¶æ§‹èªªæ˜

### æ ¸å¿ƒå…ƒä»¶

- **Pipeline**ï¼šä¸»è¦åŸ·è¡Œæµç¨‹æ§åˆ¶
- **Analyzer**ï¼šç¨‹å¼ç¢¼çµæ§‹åˆ†æï¼ˆåŸºæ–¼ Tree-sitterï¼‰
- **Agent**ï¼šAI åˆ†æä»£ç†ï¼ˆä½¿ç”¨ Autogen æ¡†æ¶ï¼‰  
- **Model**ï¼šè³‡æ–™æ¨¡å‹å’Œå¿«å–ç®¡ç†ï¼ˆåŸºæ–¼ TinyDBï¼‰
- **Service**ï¼šæ¥­å‹™é‚è¼¯æœå‹™å±¤

### åˆ†ææµç¨‹

1. **åŸå§‹ç¢¼çˆ¬å–**ï¼šæƒæå’Œå£“ç¸®åŸå§‹ç¢¼æª”æ¡ˆ
2. **å‡½æ•¸å°æ‡‰**ï¼šå»ºç«‹æª”æ¡ˆèˆ‡å‡½æ•¸çš„å°æ‡‰é—œä¿‚
3. **ç›¸ä¾æ€§åˆ†æ**ï¼šåˆ†æç¨‹å¼ç¢¼é–“çš„å‘¼å«é—œä¿‚
4. **å…¥å£é»æª¢æ¸¬**ï¼šè­˜åˆ¥ API ç«¯é»å’Œé‡è¦æ–¹æ³•  
5. **å‘¼å«éˆåˆ†æ**ï¼šä½¿ç”¨ AI è¿½è¹¤å®Œæ•´å‘¼å«è·¯å¾‘
6. **åŠŸèƒ½åˆ†æ**ï¼šAI åˆ†æåŠŸèƒ½ç‰¹æ€§å’Œè³‡æ–™æµ
7. **åœ–è¡¨ç”Ÿæˆ**ï¼šç”Ÿæˆ Mermaid æµç¨‹åœ–
8. **æ–‡ä»¶ç”¢å‡º**ï¼šç”Ÿæˆå®Œæ•´çš„æŠ€è¡“æ–‡ä»¶
